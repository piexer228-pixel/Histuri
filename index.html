<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Histuri - مقالات</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="brand">
      <button id="openDrawer" class="hamburger" aria-label="menu">☰</button>
      <div>
        <h1 class="site-title">Histuri.co</h1>
        <div class="muted">وبلاگ اختصاصی</div>
      </div>
    </div>
    <nav class="top-links">
      <a href="index.html">مقالات</a>
      <a href="stories.html">داستان‌ها</a>
      <a href="about.html">درباره</a>
      <a href="add.html">ورود مدیر</a>
    </nav>
  </header>

  <!-- Drawer -->
  <div id="backdrop" class="backdrop"></div>
  <aside id="drawer" class="drawer" aria-hidden="true" role="dialog">
    <div class="drawer-head">
      <strong>منو</strong>
      <button id="closeDrawer" class="close-btn" aria-label="close">✕</button>
    </div>
    <nav class="drawer-nav">
      <a href="index.html" class="drawer-link">خانه</a>
      <a href="stories.html" class="drawer-link">داستان‌ها</a>
      <a href="about.html" class="drawer-link">درباره</a>
      <a href="add.html" class="drawer-link">ورود مدیر</a>
    </nav>
    <div class="drawer-footer muted">نسخه ساده — طراحی واکنشگرا</div>
  </aside>

  <!-- Main -->
  <main class="container">
    <section class="card">
      <h2>آخرین مقالات</h2>
      <p class="muted">جدیدترین مقالات شما در اینجا نمایش داده می‌شود.</p>
    </section>

    <section id="articles" class="article-grid"></section>

    <section class="card">
      <h3>آموزش</h3>
      <p class="muted">برای افزودن مقاله به صفحه <a href="add.html">ورود مدیر</a> بروید.</p>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div>این سایت توسط شرکت <strong>NIGHTNET</strong> ساخته شده</div>
  </footer>

  <script src="script.js"></script>
  <script>
    // صفحه index: بارگذاری مقالات
    (function(){
      const grid = document.getElementById('articles');
      function render(){
        grid.innerHTML = '';
        const raw = localStorage.getItem('histuri_articles');
        const arr = raw ? JSON.parse(raw) : [];
        if(!arr.length){
          grid.innerHTML = '<div class="card">تاکنون مقاله‌ای منتشر نشده. <a href="add.html">ورود مدیر</a></div>';
          return;
        }
        arr.slice().reverse().forEach((a,i)=>{
          const idx = arr.length - 1 - i;
          const el = document.createElement('article');
          el.className = 'article-card';
          el.innerHTML = `
            ${a.thumbnail ? `<img class="article-thumb" src="${a.thumbnail}" alt="${escapeHtml(a.title)}">` : ''}
            <h3>${escapeHtml(a.title)}</h3>
            <div class="muted small">دسته: ${escapeHtml(a.category || 'عمومی')}</div>
            <div class="excerpt">${a.excerpt || (stripHtml(a.content||'').slice(0,180)+'...')}</div>
            <div style="display:flex;justify-content:flex-end;margin-top:10px">
              <a class="btn ghost" href="story.html?id=${idx}">مشاهده کامل</a>
            </div>
          `;
          grid.appendChild(el);
        });
      }
      render();

      // Drawer behavior (shared)
      initDrawer();
    })();
  </script>
</body>
</html>
