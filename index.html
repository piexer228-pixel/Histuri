<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Histuri.com â€” Ù…Ù‚Ø§Ù„Ø§Øª</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="brand">
      <button id="openDrawer" class="hamburger" aria-label="menu">â˜°</button>
      <div class="brand-text">
        <h1 class="site-title">Histuri.com âœ¨</h1>
        <div class="muted">ÙˆØ¨Ù„Ø§Ú¯ ÙØ§Ù†ØªØ²ÛŒ Ø´Ù…Ø§</div>
      </div>
    </div>

    <nav class="top-links">
      <a href="index.html">Ù…Ù‚Ø§Ù„Ø§Øª</a>
      <a href="stories.html">Ø¯Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</a>
      <a href="about.html">Ø¯Ø±Ø¨Ø§Ø±Ù‡</a>
      <a href="add.html" class="btn small ghost">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</a>
    </nav>
  </header>

  <!-- Drawer + Backdrop -->
  <div id="backdrop" class="backdrop"></div>
  <aside id="drawer" class="drawer" aria-hidden="true" role="dialog">
    <div class="drawer-head">
      <div class="drawer-title">Ù…Ù†ÙˆÛŒ Ø³Ø§ÛŒØª <span class="emoji">ğŸŒˆ</span></div>
      <button id="closeDrawer" class="close-btn" aria-label="close">âœ•</button>
    </div>

    <nav class="drawer-nav">
      <a href="index.html" class="drawer-link">ğŸ  Ø®Ø§Ù†Ù‡</a>
      <a href="stories.html" class="drawer-link">ğŸ“š Ø¯Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§</a>
      <a href="about.html" class="drawer-link">â„¹ï¸ Ø¯Ø±Ø¨Ø§Ø±Ù‡</a>
      <a href="add.html" class="drawer-link">ğŸ” ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</a>
    </nav>

    <div class="drawer-footer muted">Ø§ÛŒÙ† Ø³Ø§ÛŒØª ØªÙˆØ³Ø· Ø´Ø±Ú©Øª <strong>NIGHTNET</strong> Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡</div>
  </aside>

  <!-- Main -->
  <main class="container">
    <section class="hero card">
      <div class="hero-left">
        <h2>Ù…Ù‚Ø§Ù„Ø§Øª Ø¬Ø¯ÛŒØ¯</h2>
        <p class="muted">Ù…Ù‚Ø§Ù„Ø§Øª ÙØ§Ù†ØªØ²ÛŒ Ùˆ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ â€” ÙÙ‚Ø· Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù…Ø·Ù„Ø¨ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.</p>
      </div>
      <div class="hero-right">
        <a href="add.html" class="btn gradient">Ù†ÙˆØ´ØªÙ† Ù…Ù‚Ø§Ù„Ù‡</a>
      </div>
    </section>

    <section id="articles" class="article-grid"></section>

    <section class="card">
      <h3>Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ùˆ Ù…ÙˆØ§Ø±Ø¯ Ù…Ø­Ø¨ÙˆØ¨</h3>
      <div class="chips">
        <span class="chip" style="--c: #1e73ff">ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ</span>
        <span class="chip" style="--c: #ff6b6b">Ø¯Ø§Ø³ØªØ§Ù†</span>
        <span class="chip" style="--c: #ffa94d">Ø²Ù†Ø¯Ú¯ÛŒ</span>
        <span class="chip" style="--c: #7c5cff">Ù‡Ù†Ø±</span>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div>Ø§ÛŒÙ† Ø³Ø§ÛŒØª ØªÙˆØ³Ø· Ø´Ø±Ú©Øª <strong>NIGHTNET</strong> Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ â€” Â© Histuri.com</div>
  </footer>

  <script src="script.js"></script>

  <script>

    // ØªØ´Ø®ÛŒØµ Ù…Ø¯ÛŒØ±
    const isAdmin = localStorage.getItem("histuri_admin") === "1";

    // Ø­Ø°Ù Ù…Ù‚Ø§Ù„Ù‡
    function deleteArticle(id){
      if(!confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) return;
      const raw = localStorage.getItem("histuri_articles");
      const arr = raw ? JSON.parse(raw) : [];
      arr.splice(id, 1);
      localStorage.setItem("histuri_articles", JSON.stringify(arr));
      location.reload();
    }

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø§Ù„Ø§Øª
    (function(){
      const grid = document.getElementById('articles');

      function render(){
        grid.innerHTML = '';
        const raw = localStorage.getItem('histuri_articles');
        const arr = raw ? JSON.parse(raw) : [];

        if(!arr.length){
          grid.innerHTML = '<div class="card">ØªØ§Ú©Ù†ÙˆÙ† Ù…Ù‚Ø§Ù„Ù‡â€ŒØ§ÛŒ Ù…Ù†ØªØ´Ø± Ù†Ø´Ø¯Ù‡. <a href="add.html" class="btn ghost small">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</a></div>';
          return;
        }

        arr.slice().reverse().forEach((a, i)=>{
          const idx = arr.length - 1 - i;
          const el = document.createElement('article');
          el.className = 'article-card';

          el.innerHTML = `
            ${a.thumbnail ? `<img class="article-thumb" src="${a.thumbnail}" alt="${escapeHtml(a.title)}">` : ''}
            <div class="article-body">
              <h3>${escapeHtml(a.title)}</h3>
              <div class="muted small">Ø¯Ø³ØªÙ‡: ${escapeHtml(a.category || 'Ø¹Ù…ÙˆÙ…ÛŒ')}</div>
              <p class="excerpt">${a.excerpt || stripHtml(a.content||'').slice(0,160) + '...'}</p>
            </div>

            <div class="article-actions">
              <a class="btn ghost small" href="story.html?id=${idx}">Ù…Ø´Ø§Ù‡Ø¯Ù‡</a>

              ${isAdmin ? `
                <a class="btn small" style="background:#4c6ef5;color:#fff" href="edit.html?id=${idx}">ÙˆÛŒØ±Ø§ÛŒØ´</a>
                <button class="btn small" style="background:#ff6b6b;color:#fff" onclick="deleteArticle(${idx})">Ø­Ø°Ù</button>
              ` : ''}

            </div>
          `;

          grid.appendChild(el);
        });
      }

      render();
      initDrawer();
    })();

  </script>

</body>
</html>
