<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Histuri - داستان‌ها</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <div class="brand">
      <button id="openDrawer4" class="hamburger" aria-label="menu">☰</button>
      <div>
        <h1 class="site-title">Histuri.co</h1>
        <div class="muted">داستان‌ها</div>
      </div>
    </div>
    <nav class="top-links">
      <a href="index.html">مقالات</a>
      <a href="about.html">درباره</a>
      <a href="add.html">ورود مدیر</a>
    </nav>
  </header>

  <div id="backdrop4" class="backdrop"></div>
  <aside id="drawer4" class="drawer" aria-hidden="true" role="dialog">
    <div class="drawer-head">
      <strong>منو</strong>
      <button id="closeDrawer4" class="close-btn" aria-label="close">✕</button>
    </div>
    <nav class="drawer-nav">
      <a href="index.html" class="drawer-link">خانه</a>
      <a href="add.html" class="drawer-link">ورود مدیر</a>
      <a href="about.html" class="drawer-link">درباره</a>
    </nav>
  </aside>

  <main class="container">
    <section class="card">
      <h2>داستان‌ها</h2>
      <p class="muted">فهرست داستان‌ها (از میان مقالات فیلتر شده)</p>
    </section>

    <section id="storiesGrid" class="article-grid"></section>
  </main>

  <footer class="site-footer">
    <div>این سایت توسط شرکت <strong>NIGHTNET</strong> ساخته شده</div>
  </footer>

  <script src="script.js"></script>
  <script>
    (function(){
      initDrawer();
      const grid = document.getElementById('storiesGrid');
      const raw = localStorage.getItem('histuri_articles');
      const arr = raw ? JSON.parse(raw) : [];
      // برای نمونه: فرض کنیم دسته 'داستان' را به عنوان داستان‌ها نشان دهیم
      const filtered = arr.filter(a => (a.category || '').toLowerCase().includes('داستان') );
      if(!filtered.length){
        grid.innerHTML = '<div class="card">هیچ داستانی یافت نشد.</div>';
      } else {
        filtered.slice().reverse().forEach((a, i)=>{
          const el = document.createElement('article');
          el.className = 'article-card';
          el.innerHTML = `
            ${a.thumbnail ? `<img class="article-thumb" src="${a.thumbnail}" alt="${escapeHtml(a.title)}">` : ''}
            <h3>${escapeHtml(a.title)}</h3>
            <div class="muted small">دسته: ${escapeHtml(a.category || 'عمومی')}</div>
            <div class="excerpt">${a.excerpt || stripHtml(a.content||'').slice(0,180)+'...'}</div>
          `;
          grid.appendChild(el);
        });
      }
    })();
  </script>
</body>
</html>
