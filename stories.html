<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Histuri.com โ ุฏุงุณุชุงูโูุง</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <div class="brand">
      <button id="openDrawer4" class="hamburger" aria-label="menu">โฐ</button>
      <div class="brand-text">
        <h1 class="site-title">Histuri.com ๐</h1>
        <div class="muted">ุฏุงุณุชุงูโูุง</div>
      </div>
    </div>
    <nav class="top-links">
      <a href="index.html">ููุงูุงุช</a>
      <a href="about.html">ุฏุฑุจุงุฑู</a>
      <a href="add.html" class="btn small ghost">ูุฑูุฏ ูุฏุฑ</a>
    </nav>
  </header>

  <div id="backdrop4" class="backdrop"></div>
  <aside id="drawer4" class="drawer" aria-hidden="true" role="dialog">
    <div class="drawer-head">
      <div class="drawer-title">ููู</div>
      <button id="closeDrawer4" class="close-btn" aria-label="close">โ</button>
    </div>
    <nav class="drawer-nav">
      <a href="index.html" class="drawer-link">๐ ุฎุงูู</a>
      <a href="add.html" class="drawer-link">๐ ูุฑูุฏ ูุฏุฑ</a>
      <a href="about.html" class="drawer-link">โน๏ธ ุฏุฑุจุงุฑู</a>
    </nav>
  </aside>

  <main class="container">
    <section class="card">
      <h2>ุฏุงุณุชุงูโูุง</h2>
      <p class="muted">ุฏุงุณุชุงูโูุง ุงุฒ ูุงู ููุงูุงุช ฺฉู ุฏุณุชูโุดุงู 'ุฏุงุณุชุงู' ุงุณุช ููุฑุณุช ูโุดููุฏ.</p>
    </section>

    <section id="storiesGrid" class="article-grid"></section>
  </main>

  <footer class="site-footer">
    <div>ุงู ุณุงุช ุชูุณุท ุดุฑฺฉุช <strong>NIGHTNET</strong> ุณุงุฎุชู ุดุฏู</div>
  </footer>

  <script src="script.js"></script>
  <script>
    (function(){
      initDrawer();

      const grid = document.getElementById('storiesGrid');
      const raw = localStorage.getItem('histuri_articles');
      const arr = raw ? JSON.parse(raw) : [];

      const filtered = arr.filter(a => (a.category || '').toLowerCase().includes('ุฏุงุณุชุงู'));

      if(!filtered.length){
        grid.innerHTML = '<div class="card">ูฺ ุฏุงุณุชุงู ุงูุช ูุดุฏ.</div>';
        return;
      }

      filtered.slice().reverse().forEach((a, i)=>{
        const idx = arr.length - 1 - i;

        const el = document.createElement('article');
        el.className = 'article-card';

        el.innerHTML = `
          ${a.thumbnail ? `<img class="article-thumb" src="${a.thumbnail}" alt="${escapeHtml(a.title)}">` : ''}
          <h3>${escapeHtml(a.title)}</h3>
          <div class="muted small">ุฏุณุชู: ${escapeHtml(a.category)}</div>
          <p class="excerpt">${a.excerpt || stripHtml(a.content||'').slice(0,160) + '...'}</p>

          <div class="article-actions">
            <a class="btn ghost small" href="story.html?id=${idx}">ูุดุงูุฏู</a>

            <!-- ุฏฺฉูู ูุฑุงุด -->
            <button class="btn small" onclick="editPost(${a.id || idx})">โ๏ธ ูุฑุงุด</button>

            <!-- ุฏฺฉูู ุญุฐู -->
            <button class="btn small danger" onclick="deletePost(${a.id || idx})">๐ ุญุฐู</button>
          </div>
        `;

        grid.appendChild(el);
      });
    })();
  </script>
</body>
</html>
